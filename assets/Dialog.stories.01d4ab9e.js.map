{"version":3,"file":"Dialog.stories.01d4ab9e.js","sources":["../../node_modules/@react-aria/dialog/dist/module.js","../../src/dialog/Dialog.tsx"],"sourcesContent":["import {useSlotId as $m1DSs$useSlotId, filterDOMProps as $m1DSs$filterDOMProps} from \"@react-aria/utils\";\nimport {focusSafely as $m1DSs$focusSafely} from \"@react-aria/focus\";\nimport {useEffect as $m1DSs$useEffect} from \"react\";\n\n\n\n\nfunction $40df3f8667284809$export$d55e7ee900f34e93(props, ref) {\n    let { role: role = 'dialog'  } = props;\n    let titleId = $m1DSs$useSlotId();\n    titleId = props['aria-label'] ? undefined : titleId;\n    // Focus the dialog itself on mount, unless a child element is already focused.\n    $m1DSs$useEffect(()=>{\n        if (ref.current && !ref.current.contains(document.activeElement)) {\n            $m1DSs$focusSafely(ref.current);\n            // Safari on iOS does not move the VoiceOver cursor to the dialog\n            // or announce that it has opened until it has rendered. A workaround\n            // is to wait for half a second, then blur and re-focus the dialog.\n            let timeout = setTimeout(()=>{\n                if (document.activeElement === ref.current) {\n                    ref.current.blur();\n                    $m1DSs$focusSafely(ref.current);\n                }\n            }, 500);\n            return ()=>{\n                clearTimeout(timeout);\n            };\n        }\n    }, [\n        ref\n    ]);\n    // We do not use aria-modal due to a Safari bug which forces the first focusable element to be focused\n    // on mount when inside an iframe, no matter which element we programmatically focus.\n    // See https://bugs.webkit.org/show_bug.cgi?id=211934.\n    // useModal sets aria-hidden on all elements outside the dialog, so the dialog will behave as a modal\n    // even without aria-modal on the dialog itself.\n    return {\n        dialogProps: {\n            ...$m1DSs$filterDOMProps(props, {\n                labelable: true\n            }),\n            role: role,\n            tabIndex: -1,\n            'aria-labelledby': props['aria-labelledby'] || titleId\n        },\n        titleProps: {\n            id: titleId\n        }\n    };\n}\n\n\n\n\nexport {$40df3f8667284809$export$d55e7ee900f34e93 as useDialog};\n//# sourceMappingURL=module.js.map\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Close } from '@material-ui/icons';\nimport { motion } from 'framer-motion';\nimport { Button } from '../button/Button';\nimport { Divider } from '../divider/Divider';\nimport { FocusScope } from '@react-aria/focus';\nimport { useModal, useOverlay, usePreventScroll } from '@react-aria/overlays';\nimport { useDialog } from '@react-aria/dialog';\nimport { mergeProps } from '@react-aria/utils';\nimport clsx from 'clsx';\n\nimport styles from './dialog.module.scss';\n\ninterface DialogProps extends Omit<React.HTMLProps<HTMLDivElement>, 'ref'> {\n  className?: string;\n  style?: React.CSSProperties;\n  title?: string;\n  open?: boolean;\n  onRequestClose?: () => void | null;\n}\n\nexport const Dialog: React.FC<DialogProps & { open?: boolean }> = ({\n  open,\n  onRequestClose,\n  style,\n  ...props\n}) => {\n  const isBrowser = typeof window !== 'undefined';\n\n  const element = React.useRef<HTMLDivElement | null>(null);\n\n  if (isBrowser && element.current === null) {\n    element.current = document.createElement('div');\n    const dialogContainer =\n      document.getElementById('dialogContainer') ||\n      (() => {\n        const container = document.createElement('div');\n        container.id = 'dialogContainer';\n        document.body.appendChild(container);\n        return container;\n      })();\n    dialogContainer.appendChild(element.current);\n  }\n\n  React.useEffect(() => () => element.current?.remove(), []);\n\n  React.useEffect(() => {\n    if (open) {\n      const onKeyDown = (e: KeyboardEvent) => {\n        if (e.code === 'Escape') {\n          e.preventDefault();\n          onRequestClose?.();\n        }\n      };\n      document.addEventListener('keydown', onKeyDown);\n      return () => {\n        document.removeEventListener('keydown', onKeyDown);\n      };\n    }\n  }, [onRequestClose, open]);\n\n  if (!open || !isBrowser) {\n    return null;\n  }\n\n  return ReactDOM.createPortal(\n    <DialogShell style={style} onRequestClose={onRequestClose} {...props} />,\n    element.current as HTMLDivElement\n  );\n};\n\nexport const DialogShell: React.FC<DialogProps> = ({\n  children,\n  className,\n  style,\n  title,\n  onRequestClose,\n  ...otherProps\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  usePreventScroll();\n  const { modalProps } = useModal();\n  const { overlayProps, underlayProps } = useOverlay(\n    { onClose: () => onRequestClose?.(), isKeyboardDismissDisabled: true },\n    ref\n  );\n  const { dialogProps, titleProps } = useDialog(otherProps as any, ref);\n\n  const innerProps = mergeProps(\n    otherProps,\n    overlayProps,\n    dialogProps,\n    modalProps\n  ) as any;\n\n  return (\n    <motion.div\n      className={styles.root}\n      style={style}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      {...(underlayProps as any)}\n    >\n      <motion.div\n        {...innerProps}\n        initial={{ scaleY: 0, y: -150 }}\n        animate={{ scaleY: 1, y: 0 }}\n        className={clsx(styles.dialog, className)}\n        ref={ref}\n      >\n        <FocusScope contain autoFocus>\n          <section>\n            {onRequestClose && (\n              <Button\n                small\n                title={'schlieÃŸen'}\n                className={styles.close}\n                onClick={() => onRequestClose()}\n                icon={<Close />}\n              />\n            )}\n            <h3 {...titleProps}>{title}</h3>\n            <Divider />\n          </section>\n          {children}\n        </FocusScope>\n      </motion.div>\n    </motion.div>\n  );\n};\n\nexport const DialogContent: React.FC<React.HTMLProps<HTMLDivElement>> = ({\n  className,\n  ...props\n}) => {\n  return <section className={clsx(className, styles.content)} {...props} />;\n};\n\nexport const DialogActions: React.FC<React.HTMLProps<HTMLDivElement>> = ({\n  className,\n  ...props\n}) => {\n  return <section className={clsx(className, styles.actions)} {...props} />;\n};\n"],"names":["$m1DSs$useSlotId","$m1DSs$useEffect","$m1DSs$focusSafely","$m1DSs$filterDOMProps","open","onRequestClose","style","props","React.useRef","element","dialogContainer","container","document","React","e","ReactDOM.createPortal","_jsx","children","className","title","otherProps","usePreventScroll","modalProps","overlayProps","underlayProps","dialogProps","titleProps","mergeProps","root","innerProps","_jsxs","FocusScope","close"],"mappings":"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"}