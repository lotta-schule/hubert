{"version":3,"file":"Dialog.stories.a2808ec2.js","sources":["../../node_modules/@react-aria/dialog/dist/module.js","../../src/dialog/Dialog.tsx"],"sourcesContent":["import {useSlotId as $m1DSs$useSlotId, filterDOMProps as $m1DSs$filterDOMProps} from \"@react-aria/utils\";\nimport {focusSafely as $m1DSs$focusSafely} from \"@react-aria/focus\";\nimport {useEffect as $m1DSs$useEffect} from \"react\";\n\n\n\n\nfunction $40df3f8667284809$export$d55e7ee900f34e93(props, ref) {\n    let { role: role = 'dialog'  } = props;\n    let titleId = $m1DSs$useSlotId();\n    titleId = props['aria-label'] ? undefined : titleId;\n    // Focus the dialog itself on mount, unless a child element is already focused.\n    $m1DSs$useEffect(()=>{\n        if (ref.current && !ref.current.contains(document.activeElement)) {\n            $m1DSs$focusSafely(ref.current);\n            // Safari on iOS does not move the VoiceOver cursor to the dialog\n            // or announce that it has opened until it has rendered. A workaround\n            // is to wait for half a second, then blur and re-focus the dialog.\n            let timeout = setTimeout(()=>{\n                if (document.activeElement === ref.current) {\n                    ref.current.blur();\n                    $m1DSs$focusSafely(ref.current);\n                }\n            }, 500);\n            return ()=>{\n                clearTimeout(timeout);\n            };\n        }\n    }, [\n        ref\n    ]);\n    // We do not use aria-modal due to a Safari bug which forces the first focusable element to be focused\n    // on mount when inside an iframe, no matter which element we programmatically focus.\n    // See https://bugs.webkit.org/show_bug.cgi?id=211934.\n    // useModal sets aria-hidden on all elements outside the dialog, so the dialog will behave as a modal\n    // even without aria-modal on the dialog itself.\n    return {\n        dialogProps: {\n            ...$m1DSs$filterDOMProps(props, {\n                labelable: true\n            }),\n            role: role,\n            tabIndex: -1,\n            'aria-labelledby': props['aria-labelledby'] || titleId\n        },\n        titleProps: {\n            id: titleId\n        }\n    };\n}\n\n\n\n\nexport {$40df3f8667284809$export$d55e7ee900f34e93 as useDialog};\n//# sourceMappingURL=module.js.map\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Close } from '@material-ui/icons';\nimport { motion } from 'framer-motion';\nimport { Button } from '../button/Button';\nimport { Divider } from '../divider/Divider';\nimport { FocusScope } from '@react-aria/focus';\nimport { useModal, useOverlay, usePreventScroll } from '@react-aria/overlays';\nimport { useDialog } from '@react-aria/dialog';\nimport { mergeProps } from '@react-aria/utils';\nimport clsx from 'clsx';\n\nimport styles from './dialog.module.scss';\n\ninterface DialogProps extends Omit<React.HTMLProps<HTMLDivElement>, 'ref'> {\n  className?: string;\n  style?: React.CSSProperties;\n  title?: string;\n  open?: boolean;\n  onRequestClose?: () => void | null;\n}\n\nexport const Dialog: React.FC<DialogProps & { open?: boolean }> = ({\n  open,\n  onRequestClose,\n  style,\n  ...props\n}) => {\n  const isBrowser = typeof window !== 'undefined';\n\n  const element = React.useRef<HTMLDivElement | null>(null);\n\n  if (isBrowser && element.current === null) {\n    element.current = document.createElement('div');\n    const dialogContainer =\n      document.getElementById('dialogContainer') ||\n      (() => {\n        const container = document.createElement('div');\n        container.id = 'dialogContainer';\n        document.body.appendChild(container);\n        return container;\n      })();\n    dialogContainer.appendChild(element.current);\n  }\n\n  React.useEffect(() => () => element.current?.remove(), []);\n\n  React.useEffect(() => {\n    if (open) {\n      const onKeyDown = (e: KeyboardEvent) => {\n        if (e.code === 'Escape') {\n          e.preventDefault();\n          onRequestClose?.();\n        }\n      };\n      document.addEventListener('keydown', onKeyDown);\n      return () => {\n        document.removeEventListener('keydown', onKeyDown);\n      };\n    }\n  }, [onRequestClose, open]);\n\n  if (!open || !isBrowser) {\n    return null;\n  }\n\n  return ReactDOM.createPortal(\n    <DialogShell style={style} onRequestClose={onRequestClose} {...props} />,\n    element.current as HTMLDivElement\n  );\n};\n\nexport const DialogShell: React.FC<DialogProps> = ({\n  children,\n  className,\n  style,\n  title,\n  onRequestClose,\n  ...otherProps\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  usePreventScroll();\n  const { modalProps } = useModal();\n  const { overlayProps, underlayProps } = useOverlay(\n    { onClose: () => onRequestClose?.(), isKeyboardDismissDisabled: true },\n    ref\n  );\n  const { dialogProps, titleProps } = useDialog(otherProps as any, ref);\n\n  const innerProps = mergeProps(\n    otherProps,\n    overlayProps,\n    dialogProps,\n    modalProps\n  ) as any;\n\n  return (\n    <motion.div\n      className={styles.root}\n      style={style}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      {...(underlayProps as any)}\n    >\n      <motion.div\n        {...innerProps}\n        initial={{ scaleY: 0, y: -150 }}\n        animate={{ scaleY: 1, y: 0 }}\n        className={clsx(styles.dialog, className)}\n        ref={ref}\n      >\n        <FocusScope contain autoFocus>\n          <section>\n            {onRequestClose && (\n              <Button\n                small\n                title={'schlieÃŸen'}\n                className={styles.close}\n                onClick={() => onRequestClose()}\n                icon={<Close />}\n              />\n            )}\n            <h3 {...titleProps}>{title}</h3>\n            <Divider />\n          </section>\n          {children}\n        </FocusScope>\n      </motion.div>\n    </motion.div>\n  );\n};\n\nexport const DialogContent: React.FC<React.HTMLProps<HTMLDivElement>> = ({\n  className,\n  ...props\n}) => {\n  return <section className={clsx(className, styles.content)} {...props} />;\n};\n\nexport const DialogActions: React.FC<React.HTMLProps<HTMLDivElement>> = ({\n  className,\n  ...props\n}) => {\n  return <section className={clsx(className, styles.actions)} {...props} />;\n};\n"],"names":["$40df3f8667284809$export$d55e7ee900f34e93","props","ref","role","titleId","$m1DSs$useSlotId","$m1DSs$useEffect","$m1DSs$focusSafely","timeout","$m1DSs$filterDOMProps","Dialog","open","onRequestClose","style","isBrowser","element","React.useRef","container","document","dialogContainer","React","onKeyDown","e","ReactDOM.createPortal","_jsx","DialogShell","children","className","title","usePreventScroll","modalProps","overlayProps","underlayProps","dialogProps","titleProps","innerProps","mergeProps","otherProps","motion","styles","root","clsx","_jsxs","FocusScope","Button","close","Close","DialogContent","DialogActions"],"mappings":"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"}